 /*
 * sdSelectMenu
 * Copyright (c) 2010 Sliced Design (http://www.sliceddesign.com)
 * Author: Jeremy Hamel
 * Version: 1.0 (NOV 11, 2010)
 * jQuery Version: 1.3.2+
 * Dual licensed under the MIT and GPL licenses.
 * Based on code from http://www.jankoatwarpspeed.com
 */
(function($){$.fn.sdSelectMenu=function(opts){var defaults={newMenuIdFormat:'-new',newMenuClass:'dropdown'};var opts=$.extend(defaults,opts);$(this).each(function(){var obj=$(this);var id='';if(obj.attr('id').length>0){id=obj.attr('id')}else{id=obj.attr('name');obj.attr('id',id)}var target=id+opts.newMenuIdFormat;var selected=obj.find("option[selected]");obj.after('<dl id="'+target+'" class="'+opts.newMenuClass+'"><dt><a href="#">'+selected.text()+'</a></dt><dd><ul></ul></dd></dl>');obj.children().each(function(){$('#'+target+' ul').append('<li><a href="#" rel="'+$(this).val()+'">'+$(this).text()+'</a></li>')});$('#'+target).attr('title',id);obj.hide()});$('.'+opts.newMenuClass+' dt a').click(function(){$(this).parents('dl').find('ul').toggle();return false});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass(opts.newMenuClass))$('.'+opts.newMenuClass+' dd ul').hide()});$('.'+opts.newMenuClass+' dd ul li a').click(function(){var text=$(this).html();$(this).parents('dl').find('dt a').html(text);$(this).parents('dl').find('ul').hide();var original=$(this).parents('dl').attr('title');$('#'+original).val($(this).attr('rel'));return false})}})(jQuery);